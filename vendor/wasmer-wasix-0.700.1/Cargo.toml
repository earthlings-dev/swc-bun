# THIS FILE IS AUTOMATICALLY GENERATED BY CARGO
#
# When uploading crates to the registry Cargo will automatically
# "normalize" Cargo.toml files for maximal compatibility
# with all versions of Cargo and also rewrite `path` dependencies
# to registry (e.g., crates.io) dependencies.
#
# If you are reading this file be aware that the original Cargo.toml
# will likely look very different (and much more reasonable).
# See Cargo.toml.orig for the original contents.

[package]
edition = "2024"
rust-version = "1.91"
name = "wasmer-wasix"
version = "0.700.1"
authors = ["Wasmer Engineering Team <engineering@wasmer.io>"]
build = false
autolib = false
autobins = false
autoexamples = false
autotests = false
autobenches = false
description = "WASI and WASIX implementation library for Wasmer WebAssembly runtime"
homepage = "https://wasmer.io/"
readme = "README.md"
keywords = [
    "wasm",
    "webassembly",
    "wasi",
    "sandbox",
    "ABI",
]
categories = [
    "wasm",
    "os",
]
license = "MIT"
repository = "https://github.com/wasmerio/wasmer"
resolver = "2"

[package.metadata.docs.rs]
features = [
    "wasmer/sys",
    "wasmer/cranelift",
    "webc_runner_rt_wcgi",
    "webc_runner_rt_dcgi",
    "webc_runner_rt_dproxy",
    "sys-default",
]
rustc-args = [
    "--cfg",
    "docsrs",
]

[features]
compiler = []
ctrlc = ["tokio/signal"]
default = ["sys-default"]
disable-all-logging = [
    "tracing/release_max_level_off",
    "tracing/max_level_off",
]
enable-serde = [
    "typetag",
    "virtual-fs/enable-serde",
    "wasmer-wasix-types/enable-serde",
    "wasmer/enable-serde",
]
extra-logging = []
host-fs = ["virtual-fs/host-fs"]
host-reqwest = ["reqwest"]
host-threads = []
host-vnet = ["virtual-net/host-net"]
journal = [
    "tokio/fs",
    "wasmer-journal/log-file",
]
js = [
    "virtual-fs/js",
    "getrandom/js",
    "chrono",
    "js-sys",
    "wasm-bindgen",
    "wasm-bindgen-futures",
    "web-sys",
    "wasmer/js-default",
    "wasmer/wasm-types-polyfill",
    "wasmer/wat",
    "wasmer/js-serializable-module",
]
js-default = ["js"]
logging = ["tracing/log"]
remote-vnet = ["virtual-net/remote"]
sys = [
    "webc/mmap",
    "time",
    "virtual-mio/sys",
    "logging",
    "host-fs",
    "journal",
    "sys-poll",
    "sys-thread",
    "host-vnet",
    "host-threads",
    "host-reqwest",
    "ctrlc",
    "wasmer/wat",
    "wasmer/js-serializable-module",
]
sys-default = [
    "sys",
    "wasmer/sys",
]
sys-minimal = [
    "wasmer/sys",
    "sys-thread",
    "tokio/fs",
]
sys-poll = []
sys-thread = [
    "tokio/rt",
    "tokio/time",
    "tokio/rt-multi-thread",
    "rusty_pool",
]
test-js = [
    "js",
    "wasmer/wat",
]
time = ["tokio/time"]
webc_runner_rt_dcgi = [
    "webc_runner_rt_wcgi",
    "journal",
]
webc_runner_rt_dproxy = [
    "hyper",
    "hyper-util",
    "http-body-util",
    "tower",
    "tower-http",
    "journal",
]
webc_runner_rt_wcgi = [
    "hyper",
    "hyper-util",
    "http-body-util",
    "wcgi",
    "wcgi-host",
    "tower",
    "tower-http",
]

[lib]
name = "wasmer_wasix"
path = "src/lib.rs"

[[test]]
name = "context_switching"
path = "tests/context_switching.rs"

[[test]]
name = "envvar"
path = "tests/envvar.rs"

[[test]]
name = "runners"
path = "tests/runners.rs"

[[test]]
name = "stdio"
path = "tests/stdio.rs"

[dependencies.anyhow]
version = "1.0"

[dependencies.async-trait]
version = "0.1.68"

[dependencies.base64]
version = "0.22.1"

[dependencies.bincode]
version = "2.0.1"

[dependencies.blake3]
version = "1.0"

[dependencies.bus]
version = "2.4.1"

[dependencies.bytecheck]
version = "0.8.2"

[dependencies.bytes]
version = "1"

[dependencies.cfg-if]
version = "1.0"

[dependencies.chrono]
version = "^0.4.38"
features = [
    "wasmbind",
    "std",
    "clock",
]
optional = true
default-features = false

[dependencies.cooked-waker]
version = "^5"

[dependencies.crossbeam-channel]
version = "0.5.15"

[dependencies.dashmap]
version = "6.1.0"

[dependencies.derive_more]
version = "2.0.1"
features = [
    "debug",
    "display",
]

[dependencies.flate2]
version = "1.0.34"

[dependencies.futures]
version = "0.3.30"

[dependencies.getrandom]
version = "0.2"

[dependencies.heapless]
version = "0.9.2"

[dependencies.hex]
version = "0.4"

[dependencies.http]
version = "1.4.0"

[dependencies.http-body-util]
version = "0.1.1"
optional = true

[dependencies.hyper]
version = "1.8.1"
features = ["server"]
optional = true

[dependencies.hyper-util]
version = "0.1.5"
features = [
    "server",
    "server-graceful",
    "tokio",
    "service",
    "client",
]
optional = true

[dependencies.js-sys]
version = "0.3.77"
optional = true

[dependencies.linked_hash_set]
version = "0.1.6"

[dependencies.lz4_flex]
version = "0.12.0"

[dependencies.num_enum]
version = "0.7.3"

[dependencies.once_cell]
version = "1.17.1"

[dependencies.petgraph]
version = "0.8.3"

[dependencies.pin-project]
version = "1.0.12"

[dependencies.pin-utils]
version = "0.1.0"

[dependencies.rand]
version = "0.8"

[dependencies.rayon]
version = "1.7.0"
optional = true

[dependencies.rkyv]
version = "0.8.13"
features = [
    "indexmap-2",
    "bytes-1",
]

[dependencies.rusty_pool]
version = "0.7.0"
optional = true

[dependencies.semver]
version = "1.0"

[dependencies.serde]
version = "1"
features = ["derive"]
default-features = false

[dependencies.serde_derive]
version = "^1"

[dependencies.serde_json]
version = "1"

[dependencies.serde_yaml]
version = "0.9.34"

[dependencies.sha2]
version = "0.11.0-rc.3"

[dependencies.shared-buffer]
version = "0.1.4"

[dependencies.tempfile]
version = "3.6.0"

[dependencies.thiserror]
version = "2.0.17"

[dependencies.tokio]
version = "1.39.0"
features = [
    "sync",
    "macros",
    "time",
    "rt",
]
default-features = false

[dependencies.tokio-stream]
version = "0.1"
features = ["sync"]

[dependencies.toml]
version = "0.9.8"
features = ["preserve_order"]

[dependencies.tower]
version = "0.5.2"
features = [
    "make",
    "util",
]
optional = true

[dependencies.tower-http]
version = "0.6.7"
features = [
    "trace",
    "util",
    "catch-panic",
    "cors",
]
optional = true

[dependencies.tracing]
version = "0.1"
default-features = false

[dependencies.typetag]
version = "0.2.21"
optional = true

[dependencies.url]
version = "2.5"

[dependencies.urlencoding]
version = "^2"

[dependencies.virtual-fs]
version = "0.700.1"
features = ["webc-fs"]
default-features = false

[dependencies.virtual-mio]
version = "0.700.1"
default-features = false

[dependencies.virtual-net]
version = "0.700.1"
features = ["rkyv"]
default-features = false

[dependencies.waker-fn]
version = "1.1"

[dependencies.wasm-bindgen]
version = "0.2.100"
optional = true

[dependencies.wasm-bindgen-futures]
version = "0.4.37"
optional = true

[dependencies.wasm-encoder]
version = "0.244.0"
features = ["std"]
default-features = false

[dependencies.wasmer]
version = "=7.0.1"
features = ["experimental-async"]
default-features = false

[dependencies.wasmer-config]
version = "0.700.1"

[dependencies.wasmer-journal]
version = "0.700.1"
default-features = false

[dependencies.wasmer-package]
version = "0.700.1"

[dependencies.wasmer-types]
version = "=7.0.1"
default-features = false

[dependencies.wasmer-wasix-types]
version = "0.700.1"
features = ["enable-serde"]

[dependencies.wasmparser]
version = "0.244.0"
features = [
    "validate",
    "features",
    "simd",
]
default-features = false

[dependencies.wcgi]
version = "0.3.0"
optional = true

[dependencies.wcgi-host]
version = "0.3.0"
optional = true

[dependencies.web-sys]
version = "0.3.64"
features = [
    "Request",
    "RequestInit",
    "Window",
    "WorkerGlobalScope",
    "RequestMode",
    "Response",
    "Headers",
]
optional = true

[dependencies.webc]
version = "=10.0.1"

[dependencies.weezl]
version = "^0.1"

[dependencies.xxhash-rust]
version = "0.8.10"
features = ["xxh64"]
default-features = false

[dev-dependencies.assert-panic]
version = "1.0.1"

[dev-dependencies.ciborium]
version = "0.2.2"

[dev-dependencies.env_logger]
version = "0.11.5"
default-features = false

[dev-dependencies.log]
version = "0.4.22"

[dev-dependencies.pretty_assertions]
version = "1.4.0"

[dev-dependencies.tokio]
version = "1.39.0"
features = [
    "sync",
    "macros",
    "rt",
]
default-features = false

[dev-dependencies.tracing-test]
version = "0.2"

[dev-dependencies.wasm-bindgen-test]
version = "0.3.0"

[dev-dependencies.wasmer]
version = "=7.0.1"
features = [
    "wat",
    "js-serializable-module",
]
default-features = false

[target.'cfg(all(unix, not(target_os="ios")))'.dependencies.termios]
version = "0.3"

[target.'cfg(any(target_arch = "riscv64", target_arch = "loongarch64"))'.dependencies.reqwest]
version = "0.12.0"
features = [
    "native-tls",
    "json",
    "stream",
    "socks",
    "blocking",
]
optional = true
default-features = false

[target.'cfg(not(any(target_arch = "riscv64", target_arch = "loongarch64")))'.dependencies.reqwest]
version = "0.12.0"
features = [
    "rustls-tls",
    "json",
    "stream",
    "socks",
    "blocking",
]
optional = true
default-features = false

[target.'cfg(not(target_arch = "wasm32"))'.dependencies.terminal_size]
version = "0.4.3"

[target.'cfg(not(target_arch = "wasm32"))'.dependencies.zstd]
version = "0.13.2"

[target.'cfg(not(target_arch = "wasm32"))'.dev-dependencies.tracing-subscriber]
version = "0.3"
default-features = false

[target.'cfg(not(target_arch = "wasm32"))'.dev-dependencies.wasmer]
version = "=7.0.1"
features = [
    "wat",
    "js-serializable-module",
    "cranelift",
]
default-features = false

[target.'cfg(target_arch = "wasm32")'.dev-dependencies.tracing-wasm]
version = "0.2"

[target.'cfg(target_arch = "wasm32")'.dev-dependencies.wasm-bindgen-test]
version = "0.3.0"

[target."cfg(unix)".dependencies.libc]
version = "0.2.178"
default-features = false

[target."cfg(windows)".dependencies.windows-sys]
version = "0.61.2"
features = ["Win32_System_SystemInformation"]
default-features = false
